\section{Best-Selling Albums Dataset}

{\bf Attributes:} Year, Ranking, Artist, Album, Genre, Worldwide Sales, Tracks, Album Length\\

{\bf Scenario:} A media analytics firm is interested in understanding whether certain genres consistently produce top-selling albums or if success is more scattered across genres.\\

{\bf Research Question:} How does the distribution of album sales vary across music genres for albums in the previous decade (released after 2015), and are high-sales outliers concentrated in certain genres?

\subsection{Part A: Data Cleaning and Preprocessing}
First, filter your dataset so that only the variables critical for your analysis remain. Then clean your data so that there is consistency in variable types, capitalization, and handle any missing or invalid values.\\
-----\\
The album data set had multiple issues that needed to be addressed. First, we pre-processed the data points by thresholding them based on their 'Year' attribute to include only those released after 2015 because that is the window of interest to this hypothetical firm. Then we removed the features not critical to the analysis of album sales by genre, leaving only 'Worldwide Sales (Est.)' and 'Genre'. On that note, we standardized the column names under snake case as 'album\_sales' and 'genres', respectively.\\

In terms of cleaning the attribute values themselves, we standardized the casing of the genre values and then checked this step by printing a dictionary of genres as keys, mapped to their respective counts. Before this casing step was enforced, printing the dictionary revealed that one genre value was written as "HIp Hop" and had defined two separate keys for the one genre.\\

The final cleaning step expresses each of the album sale values as an integer data type without any commas so that they would not be conflated as delimiters in the CSV file.\\

We wrote this utility function to accomplish the task:

\begin{verbatim}
def clean_preprocess_albums_data(input_csv: str, output_csv: str) -> pd.DataFrame:
    """
    Cleans and preprocesses the albums dataset by removing irrelevant
    features and data points, handling missing/invalid values, standardizing
    capitalization, and converting data types. 

    :param input_csv:: Path to the input CSV file containing the albums dataset.
    :type input_csv: str
    :param output_csv: Filename for the clean data.
    :type output_csv: str
    :returns: pd.DataFrame
    :rtype: pd.DataFrame
    """
    df = pd.read_csv(input_csv)

    # Keeps critical variables, relevant data points, removes missing value rows,
    # and renames columns more appropriately
    df = df[df['Year'] > 2015]
    df = df.iloc[:, [4, 7]]
    df.dropna(inplace=True)
    df.columns = ['album_sales', 'genre']

    # Confirms there aren't duplicate genres due to misspelling/invalid vals
    # and standardizes capitalization
    df['genre'] = df['genre'].str.lower()
    print(df['genre'].value_counts().to_dict())

    # Reformats albums sales as integers
    df['album_sales'] = df['album_sales'].str.replace(',', '').astype(int)

    os.makedirs(os.path.dirname(f'../datasets/clean/{output_csv}'), exist_ok=True)
    df.to_csv(f'../datasets/clean/{output_csv}', index=False)
    return df
\end{verbatim}

\begin{center}
\textbf{Figure 1:} Best-Selling Albums data pre-processing function.
\end{center}

Below is a comparison of the head of each version to illustrate the changes that were made:\\

\noindent\textbf{Top\_10\_Albums\_By\_Year.csv}
\begin{verbatim}
Year,Ranking,Artist,Album,Worldwide Sales (Est.),Tracks,Album Length,Genre
1990,1,Madonna,The Immaculate Collection,"30,000,000",17,73:32,Pop
1990,2,New Kids On The Block,Step By Step,"20,000,000",12,47:44,Pop
1990,3,Garth Brooks,No Fences,"18,770,000",10,34:34,Country
1990,4,MC Hammer,Please Hammer Don't Hurt Em,"18,000,000",13,59:04,Hip Hop
1990,5,Mariah Carey,Mariah Carey,"15,000,000",11,46:44,Pop
1990,6,Movie Soundtrack,Aashiqui,"15,000,000",12,58:13,World
1990,7,Whitney Houston,I'm Your Baby Tonight,"10,000,000",11,53:45,Pop
1990,8,Phil Collins,Serious Hits... Live!,"9,956,520",15,76:53,Rock
1990,9,Enigma,MCMXC A.D.,"8,838,000",7,40:16,Pop
1990,10,The Three Tenors,Carreras Domingo Pavarotti In Concert 1990,"8,533,000",17,67:55,Classical
...
\end{verbatim}

\noindent\textbf{album\_sales\_by\_genre.csv}
\begin{verbatim}
album_sales,genre
7657000,hip hop
6111355,hip hop
4421666,r&b
4207235,pop
4170954,pop
3661560,pop
3462374,pop
3418440,pop
3189149,pop
2727078,pop
...
\end{verbatim}

\begin{center}
    \textbf{Figure 2:} Raw vs. Cleaned Best-Selling Albums dataset.
\end{center}
\newpage

\subsection{Part B: Generate Three Visualizations}
Produce the following types of plots:
\begin{itemize}
    \item \textbf{Error Bar Plot:} Show the mean and variability (e.g., standard error or 95\% confidence intervals) of the numerical variable across each category.
    \item \textbf{Barcode Chart:} Also known as a strip plot or rug plot. Shows individual data points across categories.
    \item \textbf{Histogram:} Plot the distribution of the numerical variable, grouped by the categorical variable (using hue or facet).
\end{itemize}
-----\\
\textbf{Error Bar Plot}
\begin{center}
  \includegraphics[width=0.95\textwidth]{figures/album_sales_by_genre_error_bar_plot.png}
  
  \textbf{Figure 3:} Mean Album Sales by Genre with 95\% confidence intervals.
\end{center}

\textbf{Barcode Chart}
\begin{center}
  \includegraphics[width=0.95\textwidth]{figures/album_sales_by_genre_strip_plot.png}
  
  \textbf{Figure 4:} Average Distribution of Album Sales by Genre.
\end{center}

\textbf{Histogram}
\begin{center}
  \includegraphics[width=0.95\textwidth]{figures/album_sales_by_genre_histogram_plot.png}
  
  \textbf{Figure 5:} Histogram of Album Sales by Genre.
\end{center}
\newpage

\subsection{Part C: Evaluate and Justify Visualization}
For the dataset:
\begin{itemize}
    \item Discuss the advantages and disadvantages of each visualization type.
    \item Decide which visualization is best for the research question.
    \item Support your answer with evidence from the plots and reasoning based on dataset size, shape, or structure.
\end{itemize}
-----\\
\textbf{Advantages and Disadvantages}\\

The error bar plot does well to represent comparisons between the sample mean and gives us a notion of uncertainty in population mean. Where the error bar plot loses out, however, is first in its ability to represent outliers/non-general cases. This plot gives us no knowledge of how the mass for each genre is distributed. We can also see in later visualizations that the mass distribution for each genre does look a bit different and so there is necessary context relative to the research question that is lost for this plot. Additionally, while error bars are informative in characterizing general case behavior for many data points, they are not as useful for certain genres. In the cases of genres like Rock or Hip Hop, the representation of the population mean from this plot could very well be anywhere in a rather large range of values, so this plot does not do that well to compare population mean across genres.\\

The strip plot does a great job at contending with the spread of the data; as we saw in class, the density of the points is a very natural indicator of how the mass of the distribution is laid out across its domain, and we also get on top of that direct knowledge of what outliers exist for each genre and what that behavior looks like comparatively for each genre. We can see in Fig. 4 a relatively extreme, high-sale outlier in the Pop genre that was not obvious before with the error bar plot; an Ed Sheeran album called "Divide" from 2017, achieving just north of 13.4 million sales. This plot also tends to include a mean indicator, which we have included as a distinct, opaque symbol overtop the data points, and this is very helpful in understanding the difference between the extreme behavior and the typical behavior for each genre. The sole issue we have with this visualization is that it does not provide a direct view of the distribution for each genre, as in there is still some amount of interpretation done by the viewer to understand how mass is distributed for each genre. Nevertheless, for this particular context, we are examining a fairly small number of examples (only releases after 2015), so any issues with too much overlap of data points or a lack of clarity in how the mass is distributed is not a huge issue for this dataset.\\

The histogram is primarily helpful in the exact area where the strip plot can fail, where perhaps the mass of the distribution is hard to interpret due to this overlapping quality of its visuals, and so we get the benefit of most directly viewing how the mass is distributed over the different bins of album sales for each genre. Regarding each genre though, one concern we have is that, regardless of every color palette we tried, reading the behavior of each genre individually is obfuscated due to the shapes of these distributions being not very smooth because of how few samples we are analyzing. We also made the decision to stack the values for each distribution instead of allowing them to overlap because of how many different genres we are observing in the data; allowing them to overlap made the plot very unreadable.\\

Where we benefit much more with histograms is in examining the extreme values and in understanding the general tendencies of the data. Again, we would argue that strip plots represent these behaviors better for this data, but nonetheless histograms do well to provide us with this context, certainly well enough to make informed claims about the samples. The main struggle here is just with comparing the genres as effectively. We should also mention that histograms, strictly speaking, don't define where the sample mean is nor give a signal to where the population mean may be. Because our data for each genre generally resembles a bell curve, we can take a decent guess as to where the sample mean might be, but it is not directly readable as it is with other plots.\\

\textbf{Which visualization is best for the research question}\\

How does the distribution of album sales vary across music genres for albums in the previous decade (released after 2015), and are high-sales outliers concentrated in certain genres? The strip plot is best for answering this research question.\\

\textbf{Evidence-based Support for this answer}\\

First, let's compare the information we collect from the error bar plot versus the strip plot. Both give us very clearly the sample mean values for each genre, so when contending with the question of album sales varying across genres, we can equally speak to the general behavior of each genre within this dataset using either plot. Both tell us that Hip-Hop and Pop sells the most albums on average, having a noticeably higher mean, followed by R\&B and Rock, and trailed by Country with a noticeably lower average sale performance. We will concede though that the error bar plot does do marginally better to comparatively visualize the mean values across genres due to the fact that it does not have to scale to extreme outliers in the data, allowing it to be more expressive in this respect. Nonetheless, one can still look at the strip plot and immediately make the same comparisons between mean album sales across genres, it is just not as obvious.\\

Regrading the variance of the data, the strip plot gives us information more relevant to our research question, as we are concerned with high-sales outliers in our data. It is obvious from the shape of our data for each genre that the error bar plot completely misses the primary point to take away from the data in this respect; that being the high-sale outlier in the Pop genre. The strip plot makes it immediately clear and is the obvious choice as far as understanding the whole second part of our research question. Additionally, the error bars, while informative in the case of genres with a lot of exposure and consistence performance in the top 10 over the past decade, struggle to provide as much leverage to make claims about the general behavior of sparser genres that have greater variance. In other words, error bar plots for genres with less data and greater variance in album sales can be quite sensitive/uninformative in terms of characterizing where the population mean may be with 95\% confidence. That being said, as the strip plot is the obvious choice over error bar plot for answering the research question. \\

As far as choosing between the strip plot and the histogram, we confirmed in class and previously from the discussion of advantages and disadvantages that the strip plot mainly loses value in the cases that there is so much data, or perhaps the data is so concentrated toward the distribution's center, that it could be hard to understand the variance for each genre. That is not the case here and the strip plot actually does quite a good job at representing the relative spread in the data across genres; in this case, it's like staring at the distributions from a bird's-eye view, uninhibited by any overlapping masses across genres and expressive enough to readily show qualities like the extra mass of the left side of the pop genre distribution of album sales and the relative difference in variance between rock, pop, and hip hop.
\newpage